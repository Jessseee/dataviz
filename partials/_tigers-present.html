<div id="tigers-present">

    <h4>Tigers in The Glacial Period VS Tigers Now</h4>
    <p>Since the year 10000 BCE, a lot has changed for humankind. This visualisation shows the rise of human population compared to the annual species extinction rate in each period. The human population rates are taken relative to 1, where 1 is equal to 10,000,000,000. All extinction rates are calculated by adding the number of extinctions within a time period and dividing it through the amount of years within this period.</p>
    <div id="map"></div>

    <p class="tigers_2020 text-light mt-2" style="display: inline-block; width: max-content">Tigers 2020</p>
    <p class="tigers_glacial text-light mt-2" style="display: inline-block; width: max-content">Tigers Glacial</p> <br>
    <small> Source: <a href="https://en.wikipedia.org/wiki/Tiger">Historic and current distribution of tigers: Wikipedia</a>
    </small>

    <kendo:chart>
        <kendo:chart-legend></kendo:chart-legend>
    </kendo:chart>

    <script>
        function createMap() {
            $("#map").kendoMap({
                center: [49.122910, 87.503788],
                zoom: 2,
                layers: [{
                    type: "shape",
                    dataSource: {
                        type: "geojson",
                        transport: {
                            read: "data/merge__countries.__nr-of-tige.geo.json"
                        }
                    },
                    style: {
                        fill: {
                            opacity: 0.8
                        }
                    },
                }],
                shapeCreated: onShapeCreated,
                shapeFeatureCreated: onShapeFeatureCreated,
                shapeMouseEnter: onShapeMouseEnter,
                shapeMouseLeave: onShapeMouseLeave
            });
        }

        function onShapeCreated(e) {
            var color_glacial="#9999FF";
            var color_2020="#012345";
            var shape = e.shape;
            var tigers_2020 = shape.dataItem.properties['Tigers now'];
            var tigers_glacial = shape.dataItem.properties['Tigers during the glacial period']
            if(tigers_2020==1){
                shape.options.fill.set("color", color_2020);
            }
            else if (tigers_glacial==1) {
                shape.options.fill.set("color", color_glacial);
            }
        }

        function onShapeFeatureCreated(e) {
            e.group.options.tooltip = {
                content: e.properties.name,
                position: "cursor",
                offset: 10
            };
        }

        function onShapeMouseEnter(e) {
            e.shape.options.set("fill.opacity", 1);
        }

        function onShapeMouseLeave(e) {
            e.shape.options.set("fill.opacity", 0.8);
        }

        $(document).ready(createMap);
    </script>
</div>


